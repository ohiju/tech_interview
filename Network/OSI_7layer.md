## **네트워크 모델의 종류**

### **네트워크 계층 모델**

- TCP/IP 모델
    - TCP: 전송 제어 프로토콜(Transmission Control Protocol)
        - 한 기기에서 다른 기기로 데이터 전송하는 것을 담당
    - IP: 인터넷 프로토콜(Internet Protocol)
        - 데이터의 조각을 최대한 빨리 대상 IP 주소로 보내는 역할을 표시
    - 1980년대 초 프로토콜 모델로 공개
    - 현재의 인터넷에서 컴퓨터들이 서로 정보를 주고받는데 쓰이는 통신 규약(프로토콜)의 모음
    - 계층별 프로토콜
        - 4계층: 응용
        - 3계층: 전송
        - 2계층: 네트워크
        - 1계층: 네트워크 인터페이스
- `OSI 7계층`
    - OSI: 개방형 시스템 상호 연결(Open Systems Interconnection Reference Model)
    - 상이한 컴퓨터 시스템이 서로 통신할 수 있는 표준 제공(컴퓨터 네트워킹의 범용 언어)
    - 1984년 네트워크 통신을 체계적으로 다루는 ISO에서 표준으로 지정한 모델
    - 데이터를 주고받을 때 데이터 자체의 흐름을 각 구간별로 나눠놓은 것
    - 계층별 프로토콜
        - 7계층: 응용 - `HTTP`, SSH 등
        - 6계층: 표현 - SMB, AFP, XDR
        - 5계층: 세션 - NetBIOS
        - 4계층: 전송 - `TCP`, `UDP` 등
        - 3계층: 네트워크 - `IP`, `ICMP`, `ARP` 등
        - 2계층: 데이터 링크 - `이더넷`, ISDN, 무선랜 등
        - 1계층: 물리 - 전선, 전파, 광섬유, 모뎀 등

### 두 모델 비교
- 공통점
    - 계층적 네트워크 모델
    - 계층간 역할 정의
- 차이점
    - 계층의 수 차이
        - 4 응용 = 5 세션, 6 표현, 7 응용
        - 3 전송 = 4 전송
        - 2 네트워크 = 3 네트워크
        - 1 네트워크 인터페이스 = 1 물리, 2 데이터 링크
    - OSI는 역할 기반, TCP/IP는 프로토콜 기반
    - OSI는 통신 전반에 대한 표준
    - TCP/IP는 데이터 전송기술 특화
    - OSI: 논리적, 기능별, TCP/IP: 실무적

## **네트워크를 통해 전달되는 데이터, 패킷**

- 패킷이란?
    - 네트워크 상에서 전달되는 데이터를 통칭하는 말
    - 네트워크에서 전달하는 데이터의 형식화된 블록
    - 패킷은 `제어 정보`와 `사용자 데이터`로 이루어짐
    - 사용자 데이터는 페이로드라고도 함
    - `여러 프로토콜로 캡슐화 됨(순서가 있음)`
        - 헤더 -> 페이로드 -> 풋터(잘 사용하지 않음)
        - 마트료시카와 유사함
        - 여러 번 포장된 택배상자
        - 예시: Ethernet -> IPv4 -> TCP -> HTTP

- 패킷을 이용한 통신과정 - 캡슐화(인캡슐레이션)
  - 여러 프로토콜을 이용해서 최종적으로 `보낼 때` 패킷을 만드는 과정
  - 데이터를 보낼 때 프로토콜을 하나씩 붙이는 과정
      - TCP: 헤더, 데이터: 페이로드
      - IPv4: 헤더, TCP+데이터: 페이로드
      - Ethernet: 헤더, IPv4+TCP+데이터: 페이로드
      - 상위 계층 -> 하위 계층 순서(같은 계층끼리도 가능하나 순서가 있음)
- 패킷을 이용한 통신과정 - `디캡슐화(디캡슐레이션)`
  - 캡슐을 받을 때 패킷을 만드는 과정
  - 캡슐화의 역순
      - 하위 계층 -> 상위 계층 순서

- 계층별 패킷의 이름 PDU(프로토콜 데이터 단위: Protocol Data Unit)
    - 4계층의 PDU: 세그먼트
    - 3계층의 PDU: 패킷(다른 의미의 패킷)
    - 2계층의 PDU: 프레임(정확하게 얘기할 때 자주 쓰임)

## 2계층

### 2계층에서 하는 일
- 2계층의 기능
    - `하나의 네트워크 대역` 즉, `같은 네트워크 상`에 존재하는 여러 장비들 중에서 `어떤 장비`가 `어떤 장비`에게 보내는 데이터를 전달
    - 추가적으로 `오류 제어`(오류 체크), `흐름 제어`(누가 누구에게 데이터를 보내는지) 수행
- 2계층의 네트워크 크기
    - 2계층은 `하나의 네트워크 대역 LAN`에서만 통신할 때 사용한다.
    - 다른 네트워크와 통신할 때는 항상 `3계층`이 도와주어야 한다.
    - 3계층의 주소와 3계층의 프로토콜을 이용하여야만 다른 네트워크와 통신이 가능하다.

### 2계층에서 사용하는 주소
- 물리적 주소
- LAN에서 통신할 때 사용하는 MAC 주소(12자리의 16진수로 이루어짐, 6바이트)
    - OUI + 고유번호
        - OUI: IEEE에서 부여하는 일종의 제조회사 식별 ID 6자리
        - 고유번호: 제조사에서 부여한 고유번호 6자리

### 2계층의 프로토콜
- Ethernet 프로토콜: LAN에서 통신할 때 사용하는 Ethernet 프로토콜
    - Ethernet II Header
  ### 헤더는 다음과 같이 이루어짐
  - Preamble 4Byte
  - Preamble(Continued) 4Byte
  - `Destination Address`(목적지 주소) 4Byte
  - `Destination Address(Continued) + Source Address`(출발지 주소) 2Byte + 2Byte
  - `Source Address(Continued)` 4Byte
  - `Ethernet Type(헤더) + DATA(페이로드)` 2Byte + 2Byte
  - Ethernet Type
      - 상위 프로토콜을 미리 알려줌
      - 알려주지 않으면 알 수 없음